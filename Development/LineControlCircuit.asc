Version 4
SHEET 1 880 1088
WIRE 16 -256 -496 -256
WIRE 16 -224 16 -256
WIRE 112 -176 96 -176
WIRE 144 -176 144 -192
WIRE 144 -80 144 -96
WIRE 208 -80 144 -80
WIRE 0 -48 0 -176
WIRE 32 -48 0 -48
WIRE 112 -48 112 -176
WIRE 112 -48 96 -48
WIRE 144 16 144 0
WIRE 112 48 112 -48
WIRE 128 48 112 48
WIRE 208 48 208 -80
WIRE 208 48 176 48
WIRE -368 64 -368 48
WIRE 256 64 256 32
WIRE -288 80 -320 80
WIRE 80 80 80 48
WIRE 224 80 144 80
WIRE -96 96 -160 96
WIRE 0 96 0 -48
WIRE 0 96 -16 96
WIRE 48 96 0 96
WIRE 400 96 288 96
WIRE -160 112 -160 96
WIRE 128 112 128 48
WIRE 128 112 112 112
WIRE 144 112 144 80
WIRE 144 112 128 112
WIRE 176 112 176 48
WIRE 224 112 176 112
WIRE 48 128 0 128
WIRE 256 160 256 128
WIRE -496 176 -496 -256
WIRE -368 176 -368 160
WIRE -368 176 -496 176
WIRE -288 176 -288 80
WIRE -192 176 -288 176
WIRE -96 176 -192 176
WIRE 0 176 0 128
WIRE 0 176 -16 176
WIRE 80 176 80 144
WIRE -368 192 -368 176
WIRE -192 192 -192 176
WIRE 0 192 0 176
WIRE 400 208 400 176
WIRE 544 208 544 176
WIRE 672 208 672 176
WIRE -288 272 -288 176
WIRE -288 272 -320 272
WIRE 0 288 0 256
WIRE -368 320 -368 288
WIRE -192 320 -192 272
WIRE 544 320 544 288
WIRE 672 320 672 288
WIRE 16 448 -496 448
WIRE 16 480 16 448
WIRE 112 528 96 528
WIRE 144 528 144 512
WIRE 144 624 144 608
WIRE 208 624 144 624
WIRE 0 656 0 528
WIRE 32 656 0 656
WIRE 112 656 112 528
WIRE 112 656 96 656
WIRE 144 720 144 704
WIRE 112 752 112 656
WIRE 128 752 112 752
WIRE 208 752 208 624
WIRE 208 752 176 752
WIRE -368 768 -368 752
WIRE 256 768 256 736
WIRE -288 784 -320 784
WIRE 80 784 80 752
WIRE 224 784 144 784
WIRE -96 800 -160 800
WIRE 0 800 0 656
WIRE 0 800 -16 800
WIRE 48 800 0 800
WIRE 400 800 288 800
WIRE -160 816 -160 800
WIRE 128 816 128 752
WIRE 128 816 112 816
WIRE 144 816 144 784
WIRE 144 816 128 816
WIRE 176 816 176 752
WIRE 224 816 176 816
WIRE 48 832 0 832
WIRE 256 864 256 832
WIRE -496 880 -496 448
WIRE -368 880 -368 864
WIRE -368 880 -496 880
WIRE -288 880 -288 784
WIRE -192 880 -288 880
WIRE -96 880 -192 880
WIRE 0 880 0 832
WIRE 0 880 -16 880
WIRE 80 880 80 848
WIRE -368 896 -368 880
WIRE -192 896 -192 880
WIRE 0 896 0 880
WIRE 400 912 400 880
WIRE -288 976 -288 880
WIRE -288 976 -320 976
WIRE 0 992 0 960
WIRE -368 1024 -368 992
FLAG 544 176 Vcc
FLAG 544 320 0
FLAG 80 48 Vcc
FLAG 256 32 Vcc
FLAG 144 16 0
FLAG 144 -192 Vcc
FLAG 400 208 0
FLAG -192 320 0
FLAG 672 320 0
FLAG 672 176 -Vcc
FLAG -160 112 0
FLAG 0 288 0
FLAG 256 160 0
FLAG 80 176 0
FLAG -368 320 0
FLAG -368 48 Vcc
FLAG 80 752 Vcc
FLAG 256 736 Vcc
FLAG 144 720 0
FLAG 144 512 Vcc
FLAG 400 912 0
FLAG -160 816 0
FLAG 0 992 0
FLAG 256 864 0
FLAG 80 880 0
FLAG -368 1024 0
FLAG -368 752 Vcc
FLAG -192 176 Pulse
FLAG -192 880 Pulse
SYMBOL Opamps\\LTC2054 80 112 R0
SYMATTR InstName U1
SYMBOL Opamps\\LTC2054 256 96 R0
SYMATTR InstName U2
SYMBOL res 128 -192 R0
SYMATTR InstName R1
SYMATTR Value 10k
SYMBOL res 128 -96 R0
SYMATTR InstName R2
SYMATTR Value 1k
SYMBOL voltage 544 192 R0
SYMATTR InstName V1
SYMATTR Value 3.3
SYMBOL cap 32 -64 M90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C1
SYMATTR Value {C_Int}
SYMBOL res 0 80 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value {R_f}
SYMBOL res 384 80 R0
SYMATTR InstName R4
SYMATTR Value 10k
SYMBOL voltage -192 176 R0
WINDOW 3 126 189 Left 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V2
SYMATTR Value PULSE(0 3.3 10e-4 1e-9 1e-9 10e-3 20e-3 1)
SYMBOL voltage 672 192 R0
SYMATTR InstName V3
SYMATTR Value -3.3
SYMBOL res 0 160 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value {R_f}
SYMBOL cap -16 192 R0
SYMATTR InstName C2
SYMATTR Value {C_Int}
SYMBOL nmos 96 -224 R90
SYMATTR InstName M1
SYMATTR Value 2N7002
SYMBOL nmos -320 192 M0
SYMATTR InstName M2
SYMATTR Value 2N7002
SYMBOL pmos -320 160 R180
SYMATTR InstName M3
SYMATTR Value FDC638P
SYMBOL Opamps\\LTC2054 80 816 R0
SYMATTR InstName U3
SYMBOL Opamps\\LTC2054 256 800 R0
SYMATTR InstName U4
SYMBOL res 128 512 R0
SYMATTR InstName R6
SYMATTR Value 10k
SYMBOL res 128 608 R0
SYMATTR InstName R7
SYMATTR Value 20k
SYMBOL cap 32 640 M90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C3
SYMATTR Value {C_Int}
SYMBOL res 0 784 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R8
SYMATTR Value {R_f}
SYMBOL res 384 784 R0
SYMATTR InstName R9
SYMATTR Value 10k
SYMBOL res 0 864 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R10
SYMATTR Value {R_f}
SYMBOL cap -16 896 R0
SYMATTR InstName C4
SYMATTR Value {C_Int}
SYMBOL nmos 96 480 R90
SYMATTR InstName M4
SYMATTR Value IRF6201
SYMBOL nmos -320 896 M0
SYMATTR InstName M5
SYMATTR Value 2N7002
SYMBOL pmos -320 864 R180
SYMATTR InstName M6
SYMATTR Value FDC638P
TEXT -226 344 Left 2 !.tran 200e-3
TEXT 528 480 Left 2 !.param R_f = 10k\n.param C_Int = 1u
